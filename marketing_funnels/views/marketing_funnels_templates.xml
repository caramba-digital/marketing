<?xml version="1.0" encoding="utf-8"?>
<odoo>


  <template id="funnel_page" name="Funnel Page Layout" >
      <t t-call="website.layout">
        <t t-set="no_header" t-value="True"/>
        <t t-set="no_footer" t-value="True"/>
        <header>
           <nav class="navbar navbar-expand-md navbar-light bg-light">
              <div class="container justify-content-between">
                <span class="navbar-brand logo">
                  <img t-att-src="'/logo.png?company=%s' % res_company.id" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
                </span>
                <span class="navbar-nav">
                  <t t-set="website_sale_order" t-value="website.sale_get_order()" />
                  <a href="/shop/cart" class="btn btn-outline-primary">
                      <i class="fa fa-shopping-cart"/>
                      <span t-if="_text">My Cart</span>
                      <sup class="my_cart_quantity badge badge-primary" t-esc="website_sale_order and website_sale_order.cart_quantity or '0'" t-att-data-order-id="website_sale_order and website_sale_order.id or ''"/>
                  </a>
                </span>
              </div>
           </nav>
        </header>
        <div t-field="page.content_top" class="oe_structure" id="funnel_page" /> 
        <div t-att-class="'content-fluid {}'.format(page.style_id.theme_class)">
          <t t-if="page.type_id.resource=='product' or page.type_id.resource=='offer'"><t t-call="marketing_funnels.funnel_type_product"/></t>
          <t t-if="page.type_id.resource=='catalog'"><t t-call="marketing_funnels.funnel_type_catalog"/></t>
          <t t-if="page.type_id.resource=='event'"><t t-call="marketing_funnels.funnel_type_event"/></t>
          <t t-if="page.type_id.resource=='newsletter'"><t t-call="marketing_funnels.funnel_type_newsletter"/></t>
          <t t-if="page.type_id.resource=='lead'"><t t-call="marketing_funnels.funnel_type_lead"/></t>
          <t t-if="page.type_id.resource=='coupon_program'"><t t-call="marketing_funnels.funnel_type_coupon_program"/></t>
          <t t-if="page.type_id.resource=='badge'"><t t-call="marketing_funnels.funnel_type_badge"/></t>
        </div>
        <div t-field="page.content_bottom" class="oe_structure" id="funnel_page" />     
        <t t-if="page.social_proof_notification==True"><div class="social-proof-container"></div></t>
      </t>
  </template>

  <template id="funnel_type_product" name="Funnel Page Product" >
    <t t-set="combination" t-value="product._get_first_possible_combination()"/>
    <t t-set="combination_info" t-value="product._get_combination_info(combination, add_qty=add_qty or 1, pricelist=pricelist)"/>
    <t t-set="product_variant" t-value="product.env['product.product'].browse(combination_info['product_id'])"/>
    <t t-set="additional_title" t-value="product.name" />
    <t t-if="page.has_zoom==True">
      <t t-set="zoom_class" t-value="'js_sale ecom-zoomable zoomodoo-next'" />
      <t t-set="zoom_data" t-value="1" />
    </t>
    <t t-else="">
      <t t-set="zoom_class" t-value="'js_sale'" />
      <t t-set="zoom_data" t-value="0" /> 
    </t>
    <div itemscope="itemscope" itemtype="http://schema.org/Product" id="wrap" t-att-class="zoom_class + ' pt32 pb32'" t-att-data-ecom-zoom-auto="zoom_data">
     <section t-attf-class="container py-2 oe_website_sale #{'discount' if combination_info['has_discounted_price'] else ''} " id="product_detail" t-att-data-view-track="view_track and '1' or '0'">
      <div t-if="page.type_id.resource=='offer'" class="row">
       <div class="alert btn-primary active col" role="alert">
        A simple primary alertâ€”check it out!
        </div>
        <p t-esc="combination_info" />
      </div>
      <div class="row">
        <div class="col-md-6 col-xl-8">
          <t t-call="website_sale.shop_product_carousel"/>
        </div>
        <div class="col-md-6 col-xl-4" id="product_details">
          <h1 itemprop="name" class="funnels-h1" t-field="product.name">Product Name</h1>
          <span itemprop="url" style="display:none;" t-esc="product.website_url"/>
          <form t-if="product._is_add_to_cart_possible()" action="/shop/cart/update" method="POST">
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
             <div class="js_product js_main_product">
              <t t-placeholder="select">
                <input type="hidden" class="product_id" name="product_id" t-att-value="product_variant.id" />
                <input type="hidden" class="product_template_id" name="product_template_id" t-att-value="product.id" />
                <t t-if="combination" t-call="sale.variants">
                  <t t-set="ul_class" t-value="'flex-column'" />
                  <t t-set="parent_combination" t-value="None" />
                </t>
                <t t-else="">
                  <ul class="d-none js_add_cart_variants" t-att-data-attribute_exclusions="{'exclusions: []'}"/>
                </t>
              </t>
              <t t-call="website_sale.product_price" />
              <p t-if="True" class="css_not_available_msg alert alert-warning">This combination does not exist.</p>
              <div class="css_quantity input-group" contenteditable="false">
                  <div class="input-group-prepend">
                      <a t-attf-href="#" class="btn btn-secondary js_add_cart_json" aria-label="Remove one" title="Remove one">
                          <i class="fa fa-minus"></i>
                      </a>
                  </div>
                  <input type="text" class="form-control quantity" data-min="1" name="add_qty" t-att-value="add_qty or 1"/>
                  <div class="input-group-append">
                      <a t-attf-href="#" class="btn btn-secondary float_left js_add_cart_json" aria-label="Add one" title="Add one">
                          <i class="fa fa-plus"></i>
                      </a>
                  </div>
              </div>
              <a role="button" id="add_to_cart" class="btn btn-primary btn-lg mt16 js_check_product a-submit d-block d-sm-inline-block" href="#"><i class="fa fa-shopping-cart"/> Add to Cart</a>
              <a t-if="page.has_buy_now" role="button" id="buy_now" class="btn btn-outline-primary btn-lg mt16 d-block d-sm-inline-block" href="#"><i class="fa fa-bolt"/> Buy Now</a>
              <div id="product_option_block"/>
            </div>
          </form>
          <p t-elif="not product.active" class="alert alert-warning">This product is no longer available.</p>
          <p t-else="" class="alert alert-warning">This product has no valid combination.</p>
        </div>
      </div>
     </section>
     <div itemprop="description" t-field="product.website_description" class="oe_structure oe_empty mt16" id="product_full_description"/>
    </div>
  </template>

  <template id="funnel_type_catalog" name="Funnel Page Catalog" >
          <t t-if="page.catalogue_mode=='s_carousel'">
            <section id="swiper-coverflow" data-pagination="numbered" data-container=".funnels-products" class="s_comparisons pt32 pb32">
              <div class="swiper-container funnels-products" id="swiper-container">
                  <div class="swiper-wrapper">
                    <t t-foreach="products" t-as="product">
                    <t t-set="combination" t-value="product._get_first_possible_combination()"/>
                    <t t-set="combination_info" t-value="product._get_combination_info(combination, add_qty=add_qty or 1, pricelist=pricelist)"/>
                      <div class="swiper-slide card bg-white">
                        <h4 class="card-header" t-field="product.name"/>
                        <div class="card-body text-center">
                          <h2 class="card-title">
                            <span class="s_comparisons_currency" t-esc="website.currency_id.symbol" />
                            <span class="s_comparisons_price"><b t-esc="int(combination_info['price'])"/></span>
                            <span class="s_comparisons_decimal" t-raw="str(round(combination_info['price'] - int(combination_info['price']),2)).replace('0.','.')" />
                          </h2>
                          <small t-esc="'/ ' + product.uom_name"/>
                        </div>
                        <ul class="list-group list-group-flush" t-foreach="product.service_ids" t-as="c">
                          <li class="list-group-item" t-esc="c.name" />
                        </ul>
                        <div class="card-footer">
                          <p><i>Instant setup, satisfied or reimbursed.</i></p>
                          <a href="/contactus" class="btn btn-primary mb-2">Order now</a>
                        </div>
                      </div>
                    </t>
                  </div>
              </div>
            </section>
          </t>
          <t t-elif="page.catalogue_mode=='p_carousel'">
            <section id="swiper-coverflow" data-pagination="numbered" data-container=".funnels-products" class="pt32 pb32">
              <div class="swiper-container funnels-products" id="swiper-container">
                <div class="swiper-wrapper">
                  <t t-foreach="products" t-as="product">
                      <div class="swiper-slide card bg-white h-100">
                        <a t-att-href="product.website_url" class="funnels-catalog-img">
                          <span t-field="product.image_1920" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class':'card-img-top'}" />
                        </a>
                        <div class="card-body">
                          <h4 class="card-title text-dark" t-field="product.name"/>
                        </div>
                        <div class="card-footer">
                        </div>
                      </div>
                  </t>
                </div>
              </div>
            </section>
          </t>
          <t t-elif="page.catalogue_mode=='s_cards'">
            <section class="s_comparisons pt32 pb32">
                <div class="container">
                    <div class="row">
                       <t t-foreach="products" t-as="product">
                        <t t-set="combination" t-value="product._get_first_possible_combination()"/>
                        <t t-set="combination_info" t-value="product._get_combination_info(combination, add_qty=add_qty or 1, pricelist=pricelist)"/>
                        <div class="col-lg-4 s_col_no_bgcolor text-center pt32 pb16" >
                          <div class="card bg-200">
                             <h4 class="card-header" t-field="product.name"/>
                            <div class="card-body text-center">
                                <h2 class="card-title">
                                    <span class="s_comparisons_currency" t-esc="website.currency_id.symbol" />
                                    <span class="s_comparisons_price"><b t-esc="int(combination_info['price'])"/></span>
                                    <span class="s_comparisons_decimal" t-raw="str(round(combination_info['price'] - int(combination_info['price']),2)).replace('0.','.')" />
                                </h2>
                                <small t-esc="'/ ' + product.uom_name"/>
                            </div>
                            <ul class="list-group list-group-flush" t-foreach="product.service_ids" t-as="c">
                                <li class="list-group-item" t-esc="c.name" />
                            </ul>
                            <div class="card-footer">
                                <p><i>Instant setup, satisfied or reimbursed.</i></p>
                                <a href="/contactus" class="btn btn-primary mb-2">Order now</a>
                            </div>
                          </div>
                        </div>
                       </t>
                    </div>
                </div>
            </section>
          </t>
          <t t-else="">
            <section class="pt32 pb32">
              <div class="container">
                <div class="row d-flex align-items-stretch">
                  <t t-foreach="products" t-as="product">
                    <div class="col-lg-3 mb-4">
                      <div class="card bg-white h-100">
                        <a t-att-href="product.website_url" class="funnels-catalog-img">
                          <span t-field="product.image_1920" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class':'card-img-top'}" />
                        </a>
                        <div class="card-body">
                          <h4 class="card-title text-dark" t-field="product.name"/>
                        </div>
                        <div class="card-footer">
                        </div>
                      </div>
                    </div>
                  </t>
                </div>  
              </div>
            </section>
          </t>
  </template>

  <template id="funnel_type_event" name="Funnel Page Event" >
    <div name="event" itemscope="itemscope" itemtype="http://schema.org/Event">
      <t t-set="_record" t-value="event"/>
      <t t-set="use_filters" t-value="True"/>
      <t t-set="use_size" t-value="True"/>
      <t t-set="use_text_align" t-value="True"/>
      <div class="container d-flex flex-column flex-grow-1 justify-content-around">
        <div class="o_wevent_event_title">
          <span t-if="event.is_participating" class="badge badge-success o_wevent_badge"><i class="fa fa-check mr-2"/>Registered</span>
          <h1 t-field="event.name" class="o_wevent_event_name" itemprop="name" placeholder="Event Title"/>
          <h2 t-field="event.subtitle" class="o_wevent_event_subtitle" placeholder="Event Subtitle"/>
        </div>
      </div>
      <div class="container">
        <t t-call="website_event.registration_template"/>
      </div>
    </div>

        <section class="bg-200 mt-n5">
            <div class="container overflow-hidden">
                <div class="row no-gutters mt-n4 mb-3">
                    <!-- Description -->
                    <div id="o_wevent_event_main_col" class="col-lg-8 bg-white px-3 pt-5 pb-0 shadow-sm">
                        <span t-field="event.description" itemprop="description"/>
                    </div>
                    <div class="col-lg-4 bg-light shadow-sm d-print-none">
                        <!-- Date & Time -->
                        <div class="o_wevent_sidebar_block">
                            <h6 class="o_wevent_sidebar_title">Date &amp; Time</h6>
                            <div class="d-flex">
                                <h5 t-field="event.with_context(tz=event.date_tz).date_begin" class="my-1 mr-1" t-options="{'date_only': 'true', 'format': 'EEEE'}"/>
                                <h5 class="my-1" t-field="event.with_context(tz=event.date_tz).date_begin" t-options="{'date_only': 'true', 'format': 'long'}" itemprop="startDate" t-att-datetime="event.date_begin"/>
                            </div>
                            <t t-if="not event.is_one_day">Start -</t>
                            <span t-field="event.with_context(tz=event.date_tz).date_begin" t-options="{'time_only': 'true', 'format': 'short'}"/>
                            <t t-if="event.is_one_day">
                                <i class="fa fa-long-arrow-right mx-1"/>
                                <span t-field="event.with_context(tz=event.date_tz).date_end" t-options="{'time_only': 'true', 'format': 'short'}"/>
                            </t>
                            <t t-else="">
                                <i class="fa fa-long-arrow-down d-block text-muted mx-3 my-2" style="font-size: 1.5rem"/>
                                <div class="d-flex">
                                    <h5 t-field="event.with_context(tz=event.date_tz).date_end" class="my-1 mr-1" t-options="{'date_only': 'true', 'format': 'EEEE'}"/>
                                    <h5 class="my-1" t-field="event.with_context(tz=event.date_tz).date_end" t-options="{'date_only': 'true', 'format': 'long'}"/>
                                </div>
                                <t t-if="not event.is_one_day">End -</t>
                                <span t-field="event.with_context(tz=event.date_tz).date_end" t-options="{'time_only': 'true', 'format': 'short'}"/>
                            </t>
                            <!-- Timezone -->
                            <small t-esc="event.date_tz" class="d-block my-3 text-muted"/>

                            <div class="dropdown">
                                <i class="fa fa-calendar mr-1"/>
                                <a href="#" role="button" data-toggle="dropdown">Add to Calendar</a>
                                <div class="dropdown-menu">
                                    <a t-att-href="iCal_url" class="dropdown-item">iCal/Outlook</a>
                                    <a t-att-href="google_url" class="dropdown-item" target="_blank">Google</a>
                                </div>
                            </div>
                        </div>
                        <!-- Location -->
                        <div t-if="event.address_id" class="o_wevent_sidebar_block">
                            <h6 class="o_wevent_sidebar_title">Location</h6>
                            <h4 t-field="event.address_id" class="" t-options='{
                                "widget": "contact",
                                "fields": ["name"]
                            }'/>
                            <div itemprop="location" class="mb-2" t-field="event.address_id" t-options='{
                                "widget": "contact",
                                "fields": ["address"],
                                "no_marker": True
                            }'/>
                            <div class="mb-3" t-field="event.address_id" t-options='{
                                "widget": "contact",
                                "fields": ["phone", "mobile", "email"]
                            }'/>
                            <i class="fa fa-map-marker fa-fw" role="img"/>
                            <a t-att-href="event._google_map_link()" target="_blank">Get the direction</a>
                        </div>
                        <!-- Organizer -->
                        <div t-if="event.organizer_id" class="o_wevent_sidebar_block">
                            <h6 class="o_wevent_sidebar_title">Organizer</h6>
                            <h4 t-field="event.organizer_id"/>
                            <div itemprop="location" t-field="event.organizer_id" t-options="{'widget': 'contact', 'fields': ['phone', 'mobile', 'email']}"/>
                        </div>
                        <!-- Social -->
                        <div class="o_wevent_sidebar_block">
                            <h6 class="o_wevent_sidebar_title">SHARE</h6>
                            <p class="mb-2">Find out what people see and say about this event, and join the conversation.</p>
                            <t t-snippet-call="website.s_share">
                                <t t-set="_no_title" t-value="True"/>
                                <t t-set="_classes" t-valuef="o_wevent_sidebar_social mx-n1"/>
                                <t t-set="_link_classes" t-valuef="o_wevent_social_link"/>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </section>
  </template>

  <template id="funnel_type_newsletter" name="Funnel Page Newsletter" >
    <section class="s_website_form pt32 pb16 o_colored_level">
      <div class="container">

      </div>
    </section>
  </template>

  <template id="funnel_type_lead" name="Funnel Page Layout Lead" >
    <section class="s_website_form pt32 pb16 o_colored_level">
      <div class="container">
        <form action="/website_form/" method="post" enctype="multipart/form-data" class="o_mark_required" data-mark="*" data-success-mode="redirect" t-att-data-success-page="page.success_page.website_url" data-model_name="crm.lead">
          <div class="s_website_form_rows row s_col_no_bgcolor">
            <div class="form-group s_website_form_field col-12  s_website_form_required  " data-type="char" data-name="Field">
              <div class="row s_col_no_resize s_col_no_bgcolor">
                <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" t-att-for="required_ids['name']">
                                  <span class="s_website_form_label_content">Your Name</span><span class="s_website_form_mark"> *</span>
                      </label>
                            <div class="col-sm">                    
                            <input type="text" class="form-control s_website_form_input" name="contact_name" required="1" t-att-id="required_ids['name']"/>
                
                            </div>
                        </div>
                  </div>
                  <div t-if="page.lead_phone!='not_necessary'"  t-att-class="'form-group s_website_form_field col-12{}'.format(' s_website_form_required' if page.lead_phone=='required' else ' ')" data-type="tel" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label " style="width: 200px" t-att-for="required_ids['phone']">
                                  <span class="s_website_form_label_content">Phone Number</span><span  t-if="page.lead_phone=='required'" class="s_website_form_mark"> *</span>
                      </label>
                            <div class="col-sm">                    
                              <input t-if="page.lead_phone=='required'" type="tel" class="form-control s_website_form_input" name="phone" required="1" t-att-id="required_ids['phone']"/>
                              <input t-else="" type="tel" class="form-control s_website_form_input" name="phone"/>
                            </div>
                        </div>
                  </div>
                  <div class="form-group s_website_form_field col-12  s_website_form_required" data-type="email" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label " style="width: 200px" t-att-for="required_ids['phone']">
                        <span class="s_website_form_label_content">Your Email</span><span class="s_website_form_mark"> *</span>
                      </label>
                            <div class="col-sm">
                                  <input type="email" class="form-control s_website_form_input" name="email_from" required="1" t-att-id="required_ids['phone']"/>
                      </div>
                        </div>
                  </div>
                  <div t-if="page.lead_company!='not_necessary'" t-att-class="'form-group s_website_form_field col-12{}'.format(' s_website_form_required' if page.lead_company=='required' else ' ')" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label " style="width: 200px" t-att-for="required_ids['company']">
                                  <span class="s_website_form_label_content">Your Company</span><span  t-if="page.lead_company=='required'" class="s_website_form_mark"> *</span>
                      </label>
                            <div class="col-sm">
                                <input t-if="page.lead_company=='required'" type="text" class="form-control s_website_form_input" name="partner_name" required="1" t-att-id="required_ids['company']"/>
                                <input t-else="" type="text" class="form-control s_website_form_input" name="partner_name" />
                      </div>
                        </div>
                  </div>
                  <div t-att-class="'form-group s_website_form_field col-12{}'.format(' s_website_form_required' if page.lead_subject=='required' else ' s_website_form_dnone')" data-type="char" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label " style="width: 200px" t-att-for="required_ids['subject']">
                              <t t-if="page.lead_subject=='required'">
                                  <span class="s_website_form_label_content">Subject</span><span class="s_website_form_mark"> *</span>
                              </t>
                              <t t-else="">
                                <span class="s_website_form_label_content"></span>
                              </t>
                      </label>
                            <div class="col-sm">                    
                              <input t-if="page.lead_subject=='required'" type="text" class="form-control s_website_form_input" name="name" required="true" t-att-id="required_ids['subject']"/>
                              <input t-else="" type="hidden" class="form-control s_website_form_input" name="name" required="true" t-att-value="page.lead_name"/>
                      </div>
                        </div>
                  </div>
                  <div t-if="page.lead_question!='not_necessary'" t-att-class="'form-group s_website_form_field col-12{}'.format(' s_website_form_required' if page.lead_question=='required' else ' ')" data-type="text" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label " style="width: 200px" t-att-for="required_ids['question']">
                                  <span class="s_website_form_label_content">Your Question</span><span  t-if="page.lead_question=='required'" class="s_website_form_mark"> *</span>
                </label>
                            <div class="col-sm">
                                  <textarea t-if="page.lead_question=='required'" class="form-control s_website_form_input" name="description" required="1" t-att-id="required_ids['question']" rows="3"></textarea>
                                  <textarea t-else="" class="form-control s_website_form_input" name="description"  rows="3"></textarea>
                      </div>
                        </div>
                  </div>
                  <div t-if="page.salesteam_id"  class="form-group s_website_form_field col-12    s_website_form_dnone" data-name="Field">
                        <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label " style="width: 200px">
                                  <span class="s_website_form_label_content"></span>
                            </label>
                            <div class="col-sm">
                              <input type="hidden" class="form-control s_website_form_input" name="team_id" t-att-value="page.salesteam_id.id"/>
                            </div>
                        </div>
                  </div>
                  <div t-if="page.salesperson_id" class="form-group s_website_form_field col-12    s_website_form_dnone" data-name="Field">
                      <div class="row s_col_no_resize s_col_no_bgcolor">
                            <label class="col-form-label col-sm-auto s_website_form_label " style="width: 200px">
                                <span class="s_website_form_label_content"></span>
                            </label>
                            <div class="col-sm">
                                  <input type="hidden" class="form-control s_website_form_input" name="user_id" t-att-value="page.salesperson_id.id"/>
                            </div>
                        </div>
                  </div>
                  <div t-att-class="'form-group col-12 s_website_form_submit {}'.format(align)" data-name="Submit Button">
                    <div style="width: 200px;" class="s_website_form_label"/>
                    <t t-set="callToAction" t-value="call_to_action"/>
                    <a href="#" role="button" class="btn btn-primary btn-lg s_website_form_send"><span t-esc="callToAction[page.call_to_action]"/></a>
                    <span id="s_website_form_result"/>
                  </div>
          </div>
        </form>
      </div>
    </section>
  </template>

  <template id="funnel_type_coupon_program" name="Funnel Page Coupon Program" >
    <h1>Coupon Program</h1>
  </template>

  <template id="funnel_type_badge" name="Funnel Page Layout Badge" >
    <h1>Badge</h1>
  </template>


</odoo>