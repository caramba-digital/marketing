<?xml version="1.0"?>
<odoo>
  <data>

    <menuitem id="menu_marketing_strategy_story_brand" name="Story Brand" parent="marketing_strategy_menu_assets" sequence="15"/>
    
<!-- Themes -->
    
    <record id='marketing_strategy_story_brand_theme_view_tree' model='ir.ui.view'>
        <field name="name">story_brand.theme.tree</field>
        <field name="model">marketing_strategy.story_brand.theme</field>
        <field name="arch" type="xml">
            <tree string="Themes">
                <field name="name" />
                <field name="story_brand_id" />
                <field name="value" />
                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_theme_view_form' model='ir.ui.view'>
        <field name="name">story_brand.theme.form</field>
        <field name="model">marketing_strategy.story_brand.theme</field>
        <field name="arch" type="xml">
            <form string="Theme">
            	<sheet>
                    <div class="oe_title">
                            <h1><field name="name"/></h1>
                        </div>
                    <group>
                        <group>
                            <field name="value" />
                            <field name="description"/>
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                        </group>
                        <group>
                            <field name="story_brand_id"/>
                            <field name="chapter" />
                        </group>
                    </group>
                    <notebook colspan="4">
                        <page string="Concept" autofocus="autofocus">
                            <field name="concept" widget="html" nolabel="1"/>
                        </page>
                        <page string="Contents">
                            <field name="contents_ids" context="{'default_theme_id': active_id}" mode="kanban" nolabel="1">
                                <kanban>
                                    <field name="id"/>
                                    <field name="name"/>
                                    <field name="format"/>
                                    <field name="mode"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div class="oe_kanban_global_click">
                                                <div class="oe_kanban_details">
                                                    <h4 class="oe_partner_heading">
                                                        <a type="open" class="o_kanban_record_title">
                                                            <field name="name"/>
                                                        </a>
                                                    </h4> 
                                                    <ul>
                                                        <li>Format:  <field name="format"/></li>
                                                        <li>Mode: <field name="mode"/></li>
                                                    </ul>
                                                </div>
                                                <div class="oe_clear"/>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                    	    </field>  
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread" options="{'post_refresh': 'recipients'}"/>
                </div>
            </form>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_theme_view_kanban' model='ir.ui.view'>
        <field name="name">story_brand.theme.kanban</field>
        <field name="model">marketing_strategy.story_brand.theme</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_small_column">
                <field name="name" />
                <field name="story_brand_id"/>
                <field name="message_needaction_counter"/>
                <field name="activity_ids"/>
                <field name="activity_state"/>
                <templates>
                    <t t-name="kanban-box">
                         <div class="oe_kanban_global_click">
                             <div class="oe_kanban_details">
                                <h4 class="oe_partner_heading">
                                    <a type="open" class="o_kanban_record_title">
                                        <field name="name"/>
                                    </a>
                                </h4> 
                                <ul>
                                    <li><field name="story_brand_id"/></li>
                                    <li><field name="chapter"/></li>
                                 </ul>
                            </div>
                                 <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left">
                                        <t t-if="record.message_needaction_counter.raw_value">
                                        <span role="alert" class="oe_kanban_mail_new" title="Unread Messages"><i class="fa fa-comments" aria-label="Messages" role="img"/><t t-raw="record.message_needaction_counter.raw_value"/></span>
                                        </t>
                                        <div class="o_kanban_inline_block">
                                        <field name="activity_ids" widget="kanban_activity"/>
                                        </div>   
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                       
                                    </div>
                                </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_theme_action' model='ir.actions.act_window'>
        <field name="name">Themes</field>
        <field name="res_model">marketing_strategy.story_brand.theme</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Create a new Theme
          </p>
        </field>
    </record>

    <menuitem action="marketing_strategy_story_brand_theme_action" name="Themes"
            parent="menu_marketing_strategy_story_brand" id="marketing_strategy_brand_theme_menu" sequence="1"/>

  <!-- Contetns -->
    
    <record id='marketing_strategy_story_brand_content_view_tree' model='ir.ui.view'>
        <field name="name">story_brand.content.tree</field>
        <field name="model">marketing_strategy.story_brand.content</field>
        <field name="arch" type="xml">
            <tree string="Contents">
                <field name="name" />
                <field name="theme_id"/>
                <field name="format"/>
            </tree>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_content_view_form' model='ir.ui.view'>
        <field name="name">story_brand.content.form</field>
        <field name="model">marketing_strategy.story_brand.content</field>
        <field name="arch" type="xml">
            <form string="Content">
            	<sheet>
                    <div class="oe_title">
                        <h1><field name="name"/></h1>
                    </div>
                    <group>
                        <group>
                            <field name="theme_id"/>
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                        </group>
                        <group>
                            <field name="mode"/>
                            <field name="format"/>
                        </group>
                    </group>
                    <notebook colspan="4">
                        <page string="Heroes">
                    	<field name="buyers_ids" context="{'content_id': active_id}"  mode="kanban" nolabel="1" >
                    		<kanban>
                    			<field name="id"/>
                                <field name="color"/>
                                <field name="name"/>
                                 <field name="status"/>
                                  <field name="personality"/>
                                 <field name="image_128"/>
                                <templates>
                                	<t t-name="kanban-box">
                                        <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click o_kanban_record_has_image_fill">
                            
                                 <field name="image_128" widget="image" class="o_kanban_image_fill_left" options="{'zoom': true, 'zoom_delay': 1000, 'background': true, 'preventClicks': false}"/>

                                        <div class="oe_kanban_details">
                                 <h4 class="oe_partner_heading">
                                    <a type="open" class="o_kanban_record_title">
                                        <field name="name"/>
                                    </a>
                                </h4> 
                               <ul>
                                 <li>Civil Status: <field name="status"/></li>
                                 <li>Personality: <field name="personality"/></li>
                                 </ul>
                                 </div>                             
                        		<div class="oe_clear"/>
                                        </div>         
                                	</t>
                                </templates>                                            
                    		</kanban>
                    	</field> 
                        </page>
                        <page string="Content" autofocus="autofocus">
                            <field name="content" widget="html" nolabel="1"/>
                        </page>
                        <page string="Touchpoints">
                            <field name="touch_point_ids" mode="kanban" nolabel="1">
                                    <kanban>
                                        <field name="id"/>
                                        <field name="name"/>
                                        <field name="type"/>
                                        <field name="name"/>
                                        <templates>
                                            <t t-name="kanban-box">
                                                <div class="oe_kanban_global_click">
                                                    <div class="oe_kanban_details">
                                                        <h4 class="oe_partner_heading">
                                                            <a type="open" class="o_kanban_record_title">
                                                                <field name="name"/>
                                                            </a>
                                                        </h4> 
                                                        <ul>
                                                            <li>Type:  <field name="type" /></li>
                                                            <li>Source: <field name="utm_source_id"/></li>
                                                        </ul>
                                                    </div>
                                                    <div class="oe_clear"/>
                                                </div>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>  
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread" options="{'post_refresh': 'recipients'}"/>
                </div>
            </form>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_content_view_kanban' model='ir.ui.view'>
        <field name="name">story_brand.content.kanban</field>
        <field name="model">marketing_strategy.story_brand.content</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_small_column">
                <field name="name" />
                <field name="theme_id" />
                <field name="chapter" />
                <field name="mode" />
                <field name="message_needaction_counter"/>
                <field name="activity_ids"/>
                <field name="activity_state"/>
                <templates>
                    <t t-name="kanban-box">
                         <div class="oe_kanban_global_click">
                             <div class="oe_kanban_details">
                                <h4 class="oe_partner_heading">
                                    <a type="open" class="o_kanban_record_title">
                                        <field name="name"/>
                                    </a>
                                </h4> 
                                <ul>
                                    <li>Theme: <field name="theme_id"/></li>
                                    <li>Chapter: <field name="chapter"/></li>
                                    <li>Mode: <field name="mode"/></li>
                                 </ul>
                            </div>
                            <div class="o_kanban_record_bottom">
                            <div class="oe_kanban_bottom_left">
                                <t t-if="record.message_needaction_counter.raw_value">
                                <span role="alert" class="oe_kanban_mail_new" title="Unread Messages"><i class="fa fa-comments" aria-label="Messages" role="img"/><t t-raw="record.message_needaction_counter.raw_value"/></span>
                                </t>
                                <div class="o_kanban_inline_block">
                                <field name="activity_ids" widget="kanban_activity"/>
                                </div>   
                            </div>
                            <div class="oe_kanban_bottom_right">
                               
                            </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="marketing_strategy_story_brand_content_filter" model="ir.ui.view">
            <field name="name">story_brand.content.search</field>
            <field name="model">marketing_strategy.story_brand.content</field>
            <field name="priority">15</field>
            <field name="arch" type="xml">
                <search string="Search Themes">
                    <field name="story_brand_id"/>
                    <field name="theme_id"/>
                    <field name="chapter"/>
                    <group expand="0" string="Group By" colspan="16">
                        <filter string="Story Brand" name="storybrand" context="{'group_by':'story_brand_id'}" />
                        <filter string="Theme" name="theme" context="{'group_by':'theme_id'}" />
                        <filter string="Chapter" name="chapter" context="{'group_by':'chapter'}" />
                    </group>
                </search>
            </field>
    </record>

    <record id='marketing_strategy_story_brand_content_action' model='ir.actions.act_window'>
        <field name="name">Contents</field>
        <field name="res_model">marketing_strategy.story_brand.content</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Create a new Content
          </p>
        </field>
    </record>

    <menuitem action="marketing_strategy_story_brand_content_action" name="Contents"
            parent="menu_marketing_strategy_story_brand" id="marketing_strategy_brand_content_menu" sequence="2"/>

<!--Story Brand-->

    <record id='marketing_strategy_story_brand_view_tree' model='ir.ui.view'>
        <field name="name">story_brand.tree</field>
        <field name="model">marketing_strategy.story_brand</field>
        <field name="arch" type="xml">
            <tree string="Brand Story">
                <field name="name" />
                <field name="value_proposition_id" />
                <field name="brand_id" />
                <field name="brand_owner_id" />
                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_view_form' model='ir.ui.view'>
        <field name="name">story_brand.form</field>
        <field name="model">marketing_strategy.story_brand</field>
        <field name="arch" type="xml">
            <form string="Story Brand">
                <header>
                     <field name="state" widget="statusbar" statusbar_visible="draft,active,done" options="{'clickable': '1'}"/>
                </header>
            	<sheet>
                    <div class="oe_title">
                        <h1><field name="name"/></h1>
                    </div>
                    <group>
                        <group string="Brand">
                            <field name="brand_id" />
                            <field name="brand_owner_id" />
                            <field name="value_proposition_id" />
                     		<field name="user_id"/>
                             <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                        </group>
                        <group string="Buyers Persona" >
                             <field name="buyers_ids"  widget="many2many" nolabel="1" >
                                <tree>
                                    <field name="name" />
                                    <field name="tribe_id" />
                                </tree>
                             </field>
                        </group>
                    </group>
                    <notebook colspan="4">
                    	<page string="Conceptual Map"  >
                    		<field name="image_1920" widget="image" autofocus="autofocus" class="img-fluid" nolabel="1"/>
                    	</page>   
                        <page string="Summary">
                            <field name="summary" widget="html"  nolabel="1"/>
                        </page>
                        <page string="Chapters" >
                                <field name="chapters_ids" mode="kanban" domain="[('chapter','=','chapter_1')]" context="{'default_story_brand_id':active_id,'default_chapter':'chapter_1'}" force_save="1"  nolabel="1">
                                    <kanban>
                                        <field name="id"/>
                                        <field name="name"/>
                                        <field name="value" />
                                        <field name="chapter" />
                                        <templates>
                                            <t t-name="kanban-box">
                                                <div class="oe_kanban_global_click">
                                                    <div class="oe_kanban_details">
                                                        <h4 class="oe_partner_heading">
                                                            <a type="open" class="o_kanban_record_title">
                                                                <field name="name"/>
                                                            </a>
                                                        </h4> 
                                                        <ul>
                                                            <li>Chapter:  <field name="chapter" /></li>
                                                            <li>Value: <field name="value"/></li>
                                                        </ul>
                                                    </div>
                                                    <div class="oe_clear"/>
                                                </div>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>  
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread" options="{'post_refresh': 'recipients'}"/>
                </div>
            </form>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_view_kanban' model='ir.ui.view'>
        <field name="name">story_brand.kanban</field>
        <field name="model">marketing_strategy.story_brand</field>
        <field name="arch" type="xml">
            <kanban  default_group_by="state" class="o_kanban_small_column">
                <field name="name" />
                <field name="brand_owner_id" />
                <field name="value_proposition_id" />
                <field name="user_id"/>
                <field name="image_128" />
                <field name="color"/>
                <field name="user_id"/>
                <field name="message_needaction_counter"/>
                <field name="activity_ids"/>
                <field name="activity_state"/>
                <templates>
                    <t t-name="kanban-box">
                         <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click  o_kanban_record_has_image_fill">
                        	<div class="o_dropdown_kanban dropdown">
                                    <a class="dropdown-toggle o-no-caret btn" role="button" data-toggle="dropdown" href="#" aria-label="Dropdown menu" title="Dropdown menu">
                                        <span class="fa fa-ellipsis-v"/>
                                    </a>
                                    <div class="dropdown-menu" role="menu">
                                        <t t-if="widget.editable"><a role="menuitem" type="edit" class="dropdown-item">Edit</a></t>
                                        <t t-if="widget.deletable"><a role="menuitem" type="delete" class="dropdown-item">Delete</a></t>
                                        <ul class="oe_kanban_colorpicker" data-field="color"/>
                                    </div>
                                </div>
                             <field name="image_128" widget="image" class="o_kanban_image_fill_left" options="{'zoom': true, 'zoom_delay': 1000, 'background': true, 'preventClicks': false}"/>
                             <div class="oe_kanban_details">
                                <h4 class="oe_partner_heading">
                                    <a type="open" class="o_kanban_record_title">
                                        <field name="name"/>
                                    </a>
                                </h4> 
                                <ul>
                                    <li>Brand: <field name="brand_id"/></li>
                                    <li>Value: <field name="value_proposition_id"/></li>
                                    <li>Owner: <field name="brand_owner_id"/></li>
                                 </ul>
                                <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left">
                                        <t t-if="record.message_needaction_counter.raw_value">
                                        <span role="alert" class="oe_kanban_mail_new" title="Unread Messages"><i class="fa fa-comments" aria-label="Messages" role="img"/><t t-raw="record.message_needaction_counter.raw_value"/></span>
                                        </t>
                                        <div class="o_kanban_inline_block">
                                        <field name="activity_ids" widget="kanban_activity"/>
                                        </div>   
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <img t-att-src="kanban_image('res.users', 'image_128', record.user_id.raw_value)" t-att-title="record.user_id.value" t-att-alt="record.user_id.value" class="oe_kanban_avatar float-right"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id='marketing_strategy_story_brand_action' model='ir.actions.act_window'>
        <field name="name">Brand Story</field>
        <field name="res_model">marketing_strategy.story_brand</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Create a new Story Brand
          </p>
        </field>
    </record>

    <menuitem action="marketing_strategy_story_brand_action" name="Brand Story"
            parent="marketing_strategy_menu_solutions" id="marketing_strategy_brand_menu" sequence="4"/>


  </data>
</odoo>